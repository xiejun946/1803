 /us	ls -lc filename         åˆ—å‡ºæ–‡ä»¶çš„ ctime     chmodæ—¶é—´
ls -lu filename         åˆ—å‡ºæ–‡ä»¶çš„ atime      accessæ—¶é—´
ls -l filename          åˆ—å‡ºæ–‡ä»¶çš„ mtime     ä¿®æ”¹æ—¶é—´
git  reflog  --relative-date  æ˜¾ç¤ºgitæ“ä½œè®°å½•å’Œæ—¶é—´
git reset --hard HEAD^        å›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬
$ git reset --hard commit_id    é€€åˆ°/è¿›åˆ° æŒ‡å®šcommit_id
https://opsx.alibaba.com/mirror
epel
##epel é…ç½®æ–¹æ³•

###1ã€å¤‡ä»½(å¦‚æœ‰é…ç½®å…¶ä»–epelæº)

mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup
mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup
2ã€ä¸‹è½½æ–°repo åˆ°/etc/yum.repos.d/
epel(RHEL 7)

	wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
epel(RHEL 6)

	wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo
epel(RHEL 5)

	wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-5.repo


rz -be å¯ä»¥è§£å†³ä¸Šä¼ ä¸­æ–­çš„é—®é¢˜ï¼Œå¦‚æœå•ç‹¬ç”¨rz ï¼Œæ–‡ä»¶æ¯”è¾ƒå¤§çš„æ—¶å€™å›å‡ºç°å¤±è´¥
æ³›è§£æå’Œç‰¹å®šè§£æçš„ä¼˜å…ˆçº§é—®é¢˜
æœ‰é™åŒ¹é…ç‰¹å®šè§£æï¼Œå¦‚ç‰¹å®šè§£æåŒ¹é…ä¸æˆåŠŸï¼Œå†åŒ¹é…æ³›è§£æ



awkæ±‚å’Œå…¬å¼
awk 'BEGIN{total=0}{total+=$2}END{print total}' 1.txt


redis æŸ¥è¯¢å†…å­˜cpu
info 
æŒ‡å®šå†…å­˜
info Memory


vimå°æŠ€å·§
æ–‡æœ¬æœç´¢ä¸æ›¿æ¢
/xx åœ¨æ–‡æœ¬ä¸­ä»å‰å¾€åæœç´¢
ï¼Ÿxx åœ¨æ–‡æœ¬ä¸­ä»åå¾€å‰æœç´¢
å…‰æ ‡æ”¾åœ¨æŸå•è¯ä¸Šï¼Œ*    ä»å‰å¾€åæœç´¢è¯¥å•è¯
å…‰æ ‡æ”¾åœ¨æŸå•è¯åœ¨ï¼Œ#    ä»åå¾€å‰æœç´¢è¯¥å•è¯
ddå‘½ä»¤åˆ é™¤è¡Œï¼Œä¼šæŠŠåˆ é™¤çš„æ•°æ®ä¿å­˜åœ¨å†…å­˜åŒºï¼Œå¯ä»¥é€šè¿‡på¤åˆ¶å‡ºæ¥ï¼Œè¾¾åˆ°çš„æ•ˆæœå°±æ˜¯è¿™ä¸€è¡Œä¸ä¸‹ä¸€è¡Œäº¤æ¢äº†
~å¯ä»¥äº¤æ¢å…‰æ ‡æ‰€åœ¨å­—æ¯çš„å¤§å°å†™ï¼Œé…ç½®è§†å›¾æ¨¡å¼éå¸¸å¥½ç”¨
.,$s/vivian/sky/g    å°†å½“å‰è¡Œå¼€å§‹åŒ¹é…çš„æ‰€æœ‰vivian æ›¿æ¢ä¸ºsky
.,$s/\"/\\\\\\\"/g   å°†å½“å‰è¡Œå¼€å§‹åŒ¹é…æ‰€æœ‰â€œæ›¿æ¢ä¸º\\\"

set autoindent
è®¾ç½®åˆ¶è¡¨ç¬¦ä¸º4ä¸ªç©ºæ ¼
set softtabstop=4è®¾ç½®è‡ªåŠ¨ç¼©è¿›

åå¢™æœåŠ¡å™¨ï¼Œ
å›½å†…è´­ä¹°ä¸€å°fikkeræœåŠ¡å™¨ï¼Œåšè·³è½¬åˆ°çœŸå®å›½å¤–åŸŸå

git checkout -b è¿œç¨‹åˆ†æ”¯ä»¥å
ansible bybywxzf -m shell -a "cd /home/git/bywx/gcapi;sudo git branch --set-upstream-to=origin/master remotes/origin/master"
éœ€è¦
éœ€è¦å…³è”
éœ€è¦å…³è”è¿œç¨‹åˆ†æ”¯ è¿™æ ·æ‰èƒ½ä¸ç”¨æŒ‡å®š Git pullä¹‹ç±»å‘½ä»¤åçš„åˆ†æ”¯
sudo git merge dev
å°†dev åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯
git checkout dev
åˆ‡æ¢åˆ†æ”¯åˆ°devåˆ†æ”¯
å¦‚æœç¬¬ä¸€æ¬¡åˆ‡æ¢
git checkout -b dev åˆ›å»ºå¹¶ä¸”åˆ‡æ¢åˆ†æ”¯
åˆ†æ”¯åˆ‡æ¢åˆå¹¶åªæ˜¯æ”¹å˜æŒ‡é’ˆçš„ä½ç½®
åˆå¹¶åˆ†æ”¯ä¹‹åå¯ä»¥åˆ é™¤ä¹‹å‰çš„devåˆ†æ”¯ï¼Œè¿™æ ·å°±åªæœ‰ä¸€ä¸ªåˆ†æ”¯äº†


[ctrl]+z å°‡å‰å°ä»»åŠ¡ä¸Ÿåˆ°åå°ä¸­æš‚åœ
jobs æŸ¥çœ‹åå°çš„å·¥ä½œçŠ¶æ€
fg %jobnumber å°†åå°çš„ä»»åŠ¡æ‹¿åˆ°å‰å°æ¥å¤„ç†
bg %jobnumber å°†ä»»åŠ¡æ”¾åˆ°åå°ä¸­å»å¤„ç†
kill ç®¡ç†åå°çš„ä»»åŠ¡


WebSocketæ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ã€‚WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼Œå¹¶ç”±RFC7936è¡¥å……è§„èŒƒã€‚WebSocket APIä¹Ÿè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚

WebSocketä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å˜å¾—æ›´åŠ ç®€å•ï¼Œå…è®¸æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€‚åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ï¼Œä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥åˆ›å»ºæŒä¹…æ€§çš„è¿æ¥ï¼Œå¹¶è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“ã€‚



ansibleç®¡ç†äº‘ä¸»æœº
æ·»åŠ ç§˜é’¥çš„æ—¶å€™
/home/centos/.ssh/authorized_keys
å°†ç®¡ç†ä¸»æœºçš„è¿™ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°è¢«ç®¡ç†ä¸»æœºä¸Šï¼Œå°±å¯ä»¥æ­£å¸¸ç®¡ç†
sshåŸç†
è‡ªå·±ä¸»æœºç”Ÿæˆå…¬é’¥ç§é’¥ï¼Œå…¬é’¥å‘é€ç»™å¯¹æ–¹æœºå™¨ï¼Œå¹¶ä¸”è®²å…¬é’¥å‘é€åˆ°authorized_keys
authè¿™ä¸ªæ–‡ä»¶æ‰æ˜¯å…ç§˜é’¥ç™»å½•çš„å…³é”®
ä¸€ã€known_hsots 
sshä¼šæŠŠä½ æ¯ä¸ªä½ è®¿é—®è¿‡è®¡ç®—æœºçš„å…¬é’¥(public key)éƒ½è®°å½•åœ¨~/.ssh/known_hostsã€‚å½“ä¸‹æ¬¡è®¿é—®ç›¸åŒè®¡ç®—æœºæ—¶ï¼ŒOpenSSHä¼šæ ¸å¯¹å…¬é’¥ã€‚å¦‚æœå…¬é’¥ä¸åŒï¼ŒOpenSSHä¼šå‘å‡ºè­¦å‘Šï¼Œ é¿å…ä½ å—åˆ°DNS Hijackä¹‹ç±»çš„æ”»å‡»ã€‚æˆ‘åœ¨ä¸Šé¢åˆ—å‡ºçš„æƒ…å†µï¼Œå°±æ˜¯è¿™ç§æƒ…å†µã€‚

åŸå› ï¼šä¸€å°ä¸»æœºä¸Šæœ‰å¤šä¸ªLinuxç³»ç»Ÿï¼Œä¼šç»å¸¸åˆ‡æ¢ï¼Œé‚£ä¹ˆè¿™äº›ç³»ç»Ÿä½¿ç”¨åŒä¸€ipï¼Œç™»å½•è¿‡ä¸€æ¬¡åå°±ä¼šæŠŠsshä¿¡æ¯è®°å½•åœ¨æœ¬åœ°çš„~/.ssh/known_hsotsæ–‡ä»¶ä¸­ï¼Œåˆ‡æ¢è¯¥ç³»ç»Ÿåå†ç”¨sshè®¿é—®è¿™å°ä¸»æœºå°±ä¼šå‡ºç°å†²çªè­¦å‘Šï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ä¿®æ”¹known_hsotsé‡Œé¢çš„å†…å®¹ã€‚

æœ‰ä»¥ä¸‹ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š 
1. æ‰‹åŠ¨åˆ é™¤ä¿®æ”¹known_hsotsé‡Œé¢çš„å†…å®¹ï¼› 
2. ä¿®æ”¹é…ç½®æ–‡ä»¶â€œ~/.ssh/configâ€ï¼ŒåŠ ä¸Šè¿™ä¸¤è¡Œï¼Œé‡å¯æœåŠ¡å™¨ã€‚ 
StrictHostKeyChecking no 
UserKnownHostsFile /dev/null

ä¼˜ç¼ºç‚¹ï¼š 
1. éœ€è¦æ¯æ¬¡æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶å†…å®¹ï¼Œä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬çš„æ— æ³•è¿è¡Œï¼ˆåœ¨SSHç™»é™†æ—¶å¤±è´¥ï¼‰ï¼Œä½†æ˜¯å®‰å…¨æ€§é«˜ï¼› 
2. SSHç™»é™†æ—¶ä¼šå¿½ç•¥known_hsotsçš„è®¿é—®ï¼Œä½†æ˜¯å®‰å…¨æ€§ä½ï¼›

äºŒã€authorized_keys 
1ã€å°±æ˜¯ä¸ºäº†è®©ä¸¤ä¸ªlinuxæœºå™¨ä¹‹é—´ä½¿ç”¨sshä¸éœ€è¦ç”¨æˆ·åå’Œå¯†ç ã€‚é‡‡ç”¨äº†æ•°å­—ç­¾åRSAæˆ–è€…DSAæ¥å®Œæˆè¿™ä¸ªæ“ä½œ

2ã€æ¨¡å‹åˆ†æ

å‡è®¾ A ï¼ˆ192.168.20.59ï¼‰ä¸ºå®¢æˆ·æœºå™¨ï¼ŒBï¼ˆ192.168.20.60ï¼‰ä¸ºç›®æ ‡æœºï¼›

è¦è¾¾åˆ°çš„ç›®çš„ï¼š 
Aæœºå™¨sshç™»å½•Bæœºå™¨æ— éœ€è¾“å…¥å¯†ç ï¼› 
åŠ å¯†æ–¹å¼é€‰ rsa|dsaå‡å¯ä»¥ï¼Œé»˜è®¤dsa 
å•å‘ç™»é™†çš„æ“ä½œè¿‡ç¨‹ï¼ˆèƒ½æ»¡è¶³ä¸Šè¾¹çš„ç›®çš„ï¼‰ï¼š 
1ã€ç™»å½•Aæœºå™¨ 
2ã€ssh-keygen -t [rsa|dsa]ï¼Œå°†ä¼šç”Ÿæˆå¯†é’¥æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶ id_rsa,id_rsa.pubæˆ–id_dsa,id_dsa.pub 
3ã€å°† .pub æ–‡ä»¶å¤åˆ¶åˆ°Bæœºå™¨çš„ .ssh ç›®å½•ï¼Œ å¹¶ cat id_dsa.pub >> ~/.ssh/authorized_keys 
4ã€å¤§åŠŸå‘Šæˆï¼Œä»Aæœºå™¨ç™»å½•Bæœºå™¨çš„ç›®æ ‡è´¦æˆ·ï¼Œä¸å†éœ€è¦å¯†ç äº†ï¼›ï¼ˆç›´æ¥è¿è¡Œ #ssh 192.168.20.60 ï¼‰

åŒå‘ç™»é™†çš„æ“ä½œè¿‡ç¨‹ï¼š

1ã€ssh-keygenåšå¯†ç éªŒè¯å¯ä»¥ä½¿åœ¨å‘å¯¹æ–¹æœºå™¨ä¸Šssh ,scpä¸ç”¨ä½¿ç”¨å¯†ç .å…·ä½“æ–¹æ³•å¦‚ä¸‹: 
2ã€ä¸¤ä¸ªèŠ‚ç‚¹éƒ½æ‰§è¡Œæ“ä½œï¼š#ssh-keygen -t rsa 
ç„¶åå…¨éƒ¨å›è½¦,é‡‡ç”¨é»˜è®¤å€¼.

3ã€è¿™æ ·ç”Ÿæˆäº†ä¸€å¯¹å¯†é’¥ï¼Œå­˜æ”¾åœ¨ç”¨æˆ·ç›®å½•çš„~/.sshä¸‹ã€‚ 
å°†å…¬é’¥è€ƒåˆ°å¯¹æ–¹æœºå™¨çš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°~/.ssh/authorized_keysä¸­ï¼ˆæ“ä½œå‘½ä»¤ï¼š#cat id_dsa.pub >> ~/.ssh/authorized_keysï¼‰

ç»™æ‰€æœ‰ä¸»æœºéƒ¨ç½²å¯†é’¥,ã€/etc/ansibleä¸­è¦æå‰å®šä¹‰ä¸»æœºï¼Œå¦‚æœå¤±è´¥åŠ ä¸Šå¯†ç ï¼Œå¹¶ä¸”cdåˆ°/root/.sshä¸­ 
ansible all -m authorized_key -a "user=root exclusive=true manage_dir=true key='$(< ~/.ssh/id_rsa.pub)'" -k

ansible-playbook 

- hosts: "testservers"        ä¸»æœºç»„  
  remote_user: root
  tasks:
    - ping:   æ¨¡å—

ansible-playbook -i inventory/testenv  ./deploy.yml
æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶


epel
å®‰è£…epelçš„rpmå®‰è£…åŒ…ä¹‹åä¼šè‡ªåŠ¨ç”Ÿæˆepelçš„yumæºï¼Œepelæ˜¯ç¬¬ä¸‰é¡¹æ‰©å±•yumæº

salt
è¿™äº›æ¨¡å—æ˜¯pythonå†™æˆçš„æ–‡ä»¶ï¼Œé‡Œé¢ä¼šæœ‰å¥½å¤šå‡½æ•°ï¼Œå¦‚cmd.runï¼Œå½“æˆ‘ä»¬æ‰§è¡Œsalt '*' cmd.run 'uptime'çš„æ—¶å€™ï¼Œmasterä¸‹å‘ä»»åŠ¡åŒ¹é…åˆ°çš„minionä¸Šå»ï¼Œminionæ‰§è¡Œæ¨¡å—å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœã€‚masterç›‘å¬4505å’Œ4506ç«¯å£ï¼Œ4505å¯¹åº”çš„æ˜¯ZMQçš„PUB systemï¼Œç”¨æ¥å‘é€æ¶ˆæ¯ï¼Œ4506å¯¹åº”çš„æ˜¯REP systemæ˜¯æ¥æ¥å—æ¶ˆæ¯çš„ã€‚

å…·ä½“æ­¥éª¤å¦‚ä¸‹

Salt stackçš„Masterä¸Minionä¹‹é—´é€šè¿‡ZeroMqè¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œä½¿ç”¨äº†ZeroMqçš„å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œè¿æ¥æ–¹å¼åŒ…æ‹¬tcpï¼Œipc

saltå‘½ä»¤ï¼Œå°†cmd.run lså‘½ä»¤ä»salt.client.LocalClient.cmd_cliå‘å¸ƒåˆ°masterï¼Œè·å–ä¸€ä¸ªJodidï¼Œæ ¹æ®jobidè·å–å‘½ä»¤æ‰§è¡Œç»“æœã€‚

masteræ¥æ”¶åˆ°å‘½ä»¤åï¼Œå°†è¦æ‰§è¡Œçš„å‘½ä»¤å‘é€ç»™å®¢æˆ·ç«¯minionã€‚

minionä»æ¶ˆæ¯æ€»çº¿ä¸Šæ¥æ”¶åˆ°è¦å¤„ç†çš„å‘½ä»¤ï¼Œäº¤ç»™minion._handle_aeså¤„ç†

minion._handle_aeså‘èµ·ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹è°ƒç”¨cmdmodæ‰§è¡Œlså‘½ä»¤ã€‚çº¿ç¨‹æ‰§è¡Œå®Œlsåï¼Œè°ƒç”¨minion._return_pubæ–¹æ³•ï¼Œå°†æ‰§è¡Œç»“æœé€šè¿‡æ¶ˆæ¯æ€»çº¿è¿”å›ç»™master

masteræ¥æ”¶åˆ°å®¢æˆ·ç«¯è¿”å›çš„ç»“æœï¼Œè°ƒç”¨master._handle_aesæ–¹æ³•ï¼Œå°†ç»“æœå†™çš„æ–‡ä»¶ä¸­

salt.client.LocalClient.cmd_clié€šè¿‡è½®è¯¢è·å–Jobæ‰§è¡Œç»“æœï¼Œå°†ç»“æœè¾“å‡ºåˆ°ç»ˆç«¯


http403æŠ¥é”™ï¼Œæœ‰å¯èƒ½æ˜¯åŸŸåå¤‡æ¡ˆé—®é¢˜ï¼Œå¤§é™†çš„æœåŠ¡å™¨webæœåŠ¡éœ€è¦å¤‡æ¡ˆï¼Œé¦™æ¸¯çš„å¯ä»¥ä¸ç”¨å¤‡æ¡ˆ


vmwareç½‘å¡é…ç½®
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp/static  IPADDR=XXX.XXX.XXX.XXX
DEFROUTE=yes
GATEWAY=192.168.0.1
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=f1811dd3-3d19-432f-b8cf-4c588077b2a4
DEVICE=ens33
ONBOOT=yes


é…ç½®ä»¥åé‡å¯network


javaç¯å¢ƒå˜é‡è®¾ç½®
jdk java develop kit
jre jave run enirment
windowsä¸‹

è£…JDK é€‰æ‹©å®‰è£…ç›®å½• å®‰è£…è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸¤æ¬¡ å®‰è£…æç¤º ã€‚ç¬¬ä¸€æ¬¡æ˜¯å®‰è£… jdk ï¼Œç¬¬äºŒæ¬¡æ˜¯å®‰è£… jre ã€‚å»ºè®®ä¸¤ä¸ªéƒ½å®‰è£…åœ¨åŒä¸€ä¸ªjavaæ–‡ä»¶å¤¹ä¸­çš„ä¸åŒæ–‡ä»¶å¤¹ä¸­ã€‚ï¼ˆä¸èƒ½éƒ½å®‰è£…åœ¨javaæ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹ï¼Œjdkå’Œjreå®‰è£…åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¼šå‡ºé”™ï¼‰?

1ï¼šå®‰è£…jdk éšæ„é€‰æ‹©ç›®å½• åªéœ€æŠŠé»˜è®¤å®‰è£…ç›®å½• \java ä¹‹å‰çš„ç›®å½•ä¿®æ”¹å³å¯
2ï¼šå®‰è£…jreâ†’æ›´æ”¹â†’ \java ä¹‹å‰ç›®å½•å’Œå®‰è£… jdk ç›®å½•ç›¸åŒå³å¯
æ³¨ï¼šè‹¥æ— å®‰è£…ç›®å½•è¦æ±‚ï¼Œå¯å…¨é»˜è®¤è®¾ç½®ã€‚æ— éœ€åšä»»ä½•ä¿®æ”¹ï¼Œä¸¤æ¬¡å‡ç›´æ¥ç‚¹ä¸‹ä¸€æ­¥ã€‚

å®‰è£…å®ŒJDKåé…ç½®ç¯å¢ƒå˜é‡ è®¡ç®—æœºâ†’å±æ€§â†’é«˜çº§ç³»ç»Ÿè®¾ç½®â†’é«˜çº§â†’ç¯å¢ƒå˜é‡

ç³»ç»Ÿå˜é‡â†’æ–°å»º JAVA_HOME å˜é‡ ã€‚
å˜é‡å€¼å¡«å†™jdkçš„å®‰è£…ç›®å½•ï¼ˆæœ¬äººæ˜¯ E:\Java\jdk1.7.0)

ç³»ç»Ÿå˜é‡â†’å¯»æ‰¾ Path å˜é‡â†’ç¼–è¾‘
åœ¨å˜é‡å€¼æœ€åè¾“å…¥ %JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;
ï¼ˆæ³¨æ„åŸæ¥Pathçš„å˜é‡å€¼æœ«å°¾æœ‰æ²¡æœ‰;å·ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå…ˆè¾“å…¥ï¼›å·å†è¾“å…¥ä¸Šé¢çš„ä»£ç ï¼‰
ç³»ç»Ÿå˜é‡â†’æ–°å»º CLASSPATH å˜é‡
å˜é‡å€¼å¡«å†™  .;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jarï¼ˆæ³¨æ„æœ€å‰é¢æœ‰ä¸€ç‚¹ï¼‰
ç³»ç»Ÿå˜é‡é…ç½®å®Œæ¯•
é‡å¯æœåŠ¡å™¨ç”Ÿæ•ˆ
æ£€éªŒæ˜¯å¦é…ç½®æˆåŠŸ è¿è¡Œcmd è¾“å…¥ java -version ï¼ˆjava å’Œ -version ä¹‹é—´æœ‰ç©ºæ ¼ï¼‰
è‹¥å¦‚å›¾æ‰€ç¤º æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ åˆ™è¯´æ˜å®‰è£…å’Œé…ç½®æˆåŠŸã€‚
3xlinuxç¯å¢ƒä¸‹


ä¿®æ”¹/etc/profileæ–‡ä»¶ 

å¦‚æœä½ çš„è®¡ç®—æœºä»…ä»…ä½œä¸ºå¼€å‘ä½¿ç”¨æ—¶æ¨èä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºæ‰€æœ‰ç”¨æˆ·çš„shelléƒ½æœ‰æƒä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå¯èƒ½ä¼šç»™ç³»ç»Ÿå¸¦æ¥å®‰å…¨æ€§é—®é¢˜ã€‚ 
Â·ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€/etc/profile 
Â·åœ¨profileæ–‡ä»¶æœ«å°¾åŠ å…¥ï¼š 
export JAVA_HOME=/usr/share/jdk1.6.0_14 
export PATH=$JAVA_HOME/bin:$PATH 
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 


ä½¿ç”¨yumå®‰è£…çš„tomcatï¼Œå…¶å®‰è£…ç›®å½•åœ¨/etcä¸‹ï¼Œwebappsåœ¨/var/lib/tomcat/webapps
å¯ä»¥ç›´æ¥æ‹–waråŒ…æˆ–è€…æ–°å»ºç›®å½•ä½¿ç”¨é™æ€æ–‡ä»¶




jenkins
/var/cache/jenkins  ç¼“å­˜ç›®å½•
/var/lib/jenkins å®¶ç›®å½•
/var/log/jenkins æ—¥å¿—ç›®å½•
 3ä¸ªç›®å½•éƒ½éœ€è¦ç»™deployæƒé™



opensslåˆ¶ä½œæœ¬åœ°è¯ä¹¦

yum -y install openssh-server openssh-clients
mdkik -p /etc/gitlab/ssl
openssl genrsa -out "/etc/gitlab/ssl/gitlab.example.com.key" 2048
openssl req -new -key "/etc/gitlab/ssl/gitlab.example.com.key" -out "/etc/gitlab/ssl/gitlab.example.com.csr"
openssl x509 -req -days 365 -in "/etc/gitlab/ssl/gitlab.example.com.csr" -signkey "/etc/gitlab/ssl/gitlab.example.com.key" -out "/etc/gitlab/ssl/gitlab.example.com.crt"
oepnssl dhparam -out /etc/gitlab/ssl/dhparams.pem 2048
chmod 600 *


pipelineè„šæœ¬è¯­æ³•


#!groovy

pipeline {
    agent {node {label 'master'}}    å®šä¹‰åœ¨å“ªé‡Œæ„å»º

    environment {       å®šä¹‰ç¯å¢ƒ
        PATH="/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin"
    }

    parameters {   å‚æ•°
        choice(   é€‰é¡¹å‚æ•°
            choices: 'dev\nprod',
            description: 'choose deploy environment',
            name: 'deploy_env'
            )
        string (name: 'version', defaultValue: '1.0.0', description: 'build version')   æ–‡ä»¶å‚æ•°
    }

    stages {   æ„å»º
        stage("Checkout test repo") {   æ„å»º1
            steps{
                sh 'git config --global http.sslVerify false'
                dir ("${env.WORKSPACE}") {   å®šä¹‰gitä»“åº“ä»¥rootç”¨æˆ·ç™»å½•
                    git branch: 'master', credentialsId:"9aa11671-aab9-47c7-a5e1-a4be146bd587", url: 'https://root@gitlab.example.com/root/test-repo.git'
                }
            }
        }
        stage("Print env variable") {   æ„å»º2
            steps {
                dir ("${env.WORKSPACE}") {
                    sh """
                    echo "[INFO] Print env variable"
                    echo "Current deployment environment is $deploy_env" >> test.properties
                    echo "The build is $version" >> test.properties
                    echo "[INFO] Done..."
                    """
                }
            }
        }
        stage("Check test properties") {   æ„å»º3
            steps{
                dir ("${env.WORKSPACE}") {   å®šä¹‰å·¥ä½œç›®å½•
                    sh """    ä½¿ç”¨shellå‘½ä»¤
                    echo "[INFO] Check test properties"
                    if [ -s test.properties ]
                    then 
                        cat test.properties
                        echo "[INFO] Done..."
                    else
                        echo "test.properties is empty"
                    fi
                    """

                    echo "[INFO] Build finished..."
                }
            }
        }
    }
}




åˆ¤å·æ–‡ä»¶æ ‡è¯†ç¬¦


    -e Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ Â  test -e filename
Â  Â  -f Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºæ–‡ä»¶ file
Â  Â  -d Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºç›®å½• directory
Â  Â  -b Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºblock deviceè®¾å¤‡
Â  Â  -c Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºcharacter deviceè®¾å¤‡
Â  Â  -S Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºSocketæ–‡ä»¶
Â  Â  -p Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºFIFO(pipe)æ–‡ä»¶
Â  Â  -L Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸ºè¿æ¥æ–‡ä»¶

æ£€æŸ¥æ–‡ä»¶æƒé™
Â  Â  -r Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”å¯è¯»æƒé™
Â  Â  -w Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”å¯å†™æƒé™
Â  Â  -x Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”å¯æ‰§è¡Œæƒé™
Â  Â  -u Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”å…·æœ‰SUIDå±æ€§
Â  Â  -g Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”å…·æœ‰SGIDå±æ€§
Â  Â  -k Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”å…·æœ‰ Sticky bit å±æ€§
Â  Â  -s Â æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”ä¸º éç©ºç™½æ–‡ä»¶

ä¸¤ä¸ªæ–‡ä»¶æ¯”è¾ƒ
Â  Â  -nt Â newer than åˆ¤æ–­file1æ˜¯å¦æ¯”file2æ–° Â 
         test file1 -nt file2    æ ¹æ®æœ€è¿‘ä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­
    -ot  older than åˆ¤æ–­file1æ˜¯å¦æ¯”file2æ—§
Â  Â  -ef Â åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€æ–‡ä»¶ï¼Œå¯ç”¨åœ¨åˆ¤æ–­hard linkä¸Šï¼Œåˆ¤å®šä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªinodeÂ 

ä¸¤ä¸ªæ•´æ•°çš„åˆ¤æ–­
Â  Â  -eq Â equal ç›¸ç­‰ï¼Œ Â test n1 -eq n2
Â  Â  -ne Â not equal ä¸ç›¸ç­‰
Â  Â  -gt Â greater than å¤§äº
Â  Â  -lt Â less than å°äº
Â  Â  -ge Â greater than or equal å¤§äºç­‰äº
Â  Â  -le Â less than or equal å°äºç­‰äº



tcpdumpå‘½ä»¤
éœ€è¦åœ¨ä¸€ä¸ªå±€åŸŸç½‘ä¹‹ä¸‹ï¼Œæœ€å¥½åœ¨ç›®æ ‡ä¸»æœºæŠ“åŒ…
ç›‘è§†æŒ‡å®šç½‘ç»œæ¥å£çš„æ•°æ®åŒ…

tcpdump -i eth1
ä¹Ÿå¯ä»¥æŒ‡å®šip,ä¾‹å¦‚æˆªè·æ‰€æœ‰210.27.48.1 çš„ä¸»æœºæ”¶åˆ°çš„å’Œå‘å‡ºçš„æ‰€æœ‰çš„æ•°æ®åŒ…

tcpdump host 210.27.48.1 

tcpdump tcp -i eth1 -t -s 0 -c 100 and dst port ! 22 and src net 192.168.1.0/24 -w ./target.cap
(1)tcp: ip icmp arp rarp å’Œ tcpã€udpã€icmpè¿™äº›é€‰é¡¹ç­‰éƒ½è¦æ”¾åˆ°ç¬¬ä¸€ä¸ªå‚æ•°çš„ä½ç½®ï¼Œç”¨æ¥è¿‡æ»¤æ•°æ®æŠ¥çš„ç±»å‹
(2)-i eth1 : åªæŠ“ç»è¿‡æ¥å£eth1çš„åŒ…
(3)-t : ä¸æ˜¾ç¤ºæ—¶é—´æˆ³. Wiresharkä¸­å¯ä»¥è®¾ç½®ï¼Œæ— æ‰€è°“
-tt    Print the timestamp, as seconds since January 1, 1970, 00:00:00, UTC, and frac-
              tions of a second since that time, on each dump line.
(4)-s 0 : æŠ“å–æ•°æ®åŒ…æ—¶é»˜è®¤æŠ“å–é•¿åº¦ä¸º68å­—èŠ‚ã€‚åŠ ä¸Š-S 0 åå¯ä»¥æŠ“åˆ°å®Œæ•´çš„æ•°æ®åŒ…
(5)-c 100 : åªæŠ“å–100ä¸ªæ•°æ®åŒ…
(6)dst port ! 22 : ä¸æŠ“å–ç›®æ ‡ç«¯å£æ˜¯22çš„æ•°æ®åŒ…
(7)src net 192.168.1.0/24 : æ•°æ®åŒ…çš„æºç½‘ç»œåœ°å€ä¸º192.168.1.0/24
(8)-w ./target.pcap : ä¿å­˜æˆpcapæ–‡ä»¶ï¼Œæ–¹ä¾¿ç”¨ethereal(å³wireshark)åˆ†æ
-A     Print each packet (minus its link level header) in ASCII.  Handy for  capturing
              web pages.
ä»¥ASCIIç æ–¹å¼æ˜¾ç¤ºæ¯ä¸€ä¸ªæ•°æ®åŒ…(ä¸ä¼šæ˜¾ç¤ºæ•°æ®åŒ…ä¸­é“¾è·¯å±‚å¤´éƒ¨ä¿¡æ¯). åœ¨æŠ“å–åŒ…å«ç½‘é¡µæ•°æ®çš„æ•°æ®åŒ…æ—¶, å¯æ–¹ä¾¿æŸ¥çœ‹æ•°æ®(
-d     Dump the compiled packet-matching code in a human  readable  form  to  standard
              output and stop.
       ä»¥å®¹æ˜“é˜…è¯»çš„å½¢å¼,åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ‰“å°å‡ºç¼–æ’è¿‡çš„åŒ…åŒ¹é…ç , éšåtcpdumpåœæ­¢
-q  å¿«é€Ÿ(ä¹Ÿè®¸ç”¨'å®‰é™'æ›´å¥½?)æ‰“å°è¾“å‡º. å³æ‰“å°å¾ˆå°‘çš„åè®®ç›¸å…³ä¿¡æ¯, ä»è€Œè¾“å‡ºè¡Œéƒ½æ¯”è¾ƒç®€çŸ­.


-vvv  äº§ç”Ÿæ¯”-vvæ›´è¯¦ç»†çš„è¾“å‡º. æ¯”å¦‚, telent æ—¶æ‰€ä½¿ç”¨çš„SB, SE é€‰é¡¹å°†ä¼šè¢«æ‰“å°, å¦‚æœtelnetåŒæ—¶ä½¿ç”¨çš„æ˜¯å›¾å½¢ç•Œé¢,

sudo tcpdump -i any -vvv host 192.168.10.101 -w shouji.pcap
æŠ“å»192.168.10.101çš„æ‰€æœ‰æµå…¥å’Œæµå‡ºçš„åŒ…
 1ã€æŠ“å–åŒ…å«172.16.1.122çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn host 172.16.1.122
 
2ã€æŠ“å–åŒ…å«172.16.1.0/24ç½‘æ®µçš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn net 172.16.1.0/24
 
3ã€æŠ“å–åŒ…å«ç«¯å£22çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn port 22
 
4ã€æŠ“å–udpåè®®çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn  udp
 
5ã€æŠ“å–icmpåè®®çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn icmp
 
6ã€æŠ“å–arpåè®®çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn arp
 
7ã€æŠ“å–ipåè®®çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn ip
 
8ã€æŠ“å–æºipæ˜¯172.16.1.122æ•°æ®åŒ…ã€‚
# tcpdump -i eth0 -vnn src host 172.16.1.122
 
9ã€æŠ“å–ç›®çš„ipæ˜¯172.16.1.122æ•°æ®åŒ…
# tcpdump -i eth0 -vnn dst host 172.16.1.122
 
10ã€æŠ“å–æºç«¯å£æ˜¯22çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn src port 22
 
11ã€æŠ“å–æºipæ˜¯172.16.1.253ä¸”ç›®çš„ipæ˜¯22çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn src host 172.16.1.253 and dst port 22
               
12ã€æŠ“å–æºipæ˜¯172.16.1.122æˆ–è€…åŒ…å«ç«¯å£æ˜¯22çš„æ•°æ®åŒ…
# tcpdump -i eth0 -vnn src host 172.16.1.122 or port 22
 
13ã€æŠ“å–æºipæ˜¯172.16.1.122ä¸”ç«¯å£ä¸æ˜¯22çš„æ•°æ®åŒ…
[root@ ftp]# tcpdump -i eth0 -vnn src host 172.16.1.122 and not port 22
 
14ã€æŠ“å–æºipæ˜¯172.16.1.2ä¸”ç›®çš„ç«¯å£æ˜¯22ï¼Œæˆ–æºipæ˜¯172.16.1.65ä¸”ç›®çš„ç«¯å£æ˜¯80çš„æ•°æ®åŒ…ã€‚
# tcpdump -i eth0 -vnn ğ‘ ğ‘Ÿğ‘â„ğ‘œğ‘ ğ‘¡172.16.1.2ğ‘ğ‘›ğ‘‘ğ‘‘ğ‘ ğ‘¡ğ‘ğ‘œğ‘Ÿğ‘¡22 or   ğ‘ ğ‘Ÿğ‘â„ğ‘œğ‘ ğ‘¡172.16.1.65ğ‘ğ‘›ğ‘‘ğ‘‘ğ‘ ğ‘¡ğ‘ğ‘œğ‘Ÿğ‘¡80
 
15ã€æŠ“å–æºipæ˜¯172.16.1.59ä¸”ç›®çš„ç«¯å£æ˜¯22ï¼Œæˆ–æºipæ˜¯172.16.1.68ä¸”ç›®çš„ç«¯å£æ˜¯80çš„æ•°æ®åŒ…ã€‚
# tcpdump -i  eth0 -vnn 'src host 172.16.1.59 and dst port 22' or  ' src host 172.16.1.68 and dst port 80 '
 
16ã€æŠŠæŠ“å–çš„æ•°æ®åŒ…è®°å½•å­˜åˆ°/tmp/fillæ–‡ä»¶ä¸­ï¼Œå½“æŠ“å–100ä¸ªæ•°æ®åŒ…åå°±é€€å‡ºç¨‹åºã€‚
# tcpdump â€“i eth0 -vnn -w  /tmp/fil1 -c 100
 
17ã€ä»/tmp/fillè®°å½•ä¸­è¯»å–tcpåè®®çš„æ•°æ®åŒ…
# tcpdump â€“i eth0 -vnn -r  /tmp/fil1 tcp
 
18ã€ä»/tmp/fillè®°å½•ä¸­è¯»å–åŒ…å«172.16.1.58çš„æ•°æ®åŒ…
# tcpdump â€“i eth0 -vnn -r  /tmp/fil1 host  172.16.1.58


æ˜¾ç¤ºè¿‡æ»¤å™¨


Tcp.port==80
!arp
ip.addr==100.17.5.12
ip.src==
ip.dst==
(ip.src == 172.18.0.2) and (http)
